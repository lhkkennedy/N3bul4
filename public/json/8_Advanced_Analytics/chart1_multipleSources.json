{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  
    "description": "US EIA chart",
  
    "title": {
      "text": "Total carbon dioxide emissions ",
      "subtitle":"Coal(blue), Natural Gas(red) and Petroleum(green) USA, Annual. Source: US EIA",
      "subtitleFontStyle":"italic",
      "subtitleFontSize":10,
      "anchor": "start",
      "color": "black"
    },
    
    "height": 300,
    "width": "container",

    "encoding": {
    
      "x": {
        "field": "dataArray[0]",
        "type": "temporal",
        "axis": {
          "title": "year",
          "grid": false,
          "ticks": true
        }
      },    
      "y": {
        "field": "dataArray[7]",
        "type": "quantitative",
        "title": "CO2 Million metric tons",
        "axis": {"grid": true},
        "scale": {"domain": [0,3000]}
      }
    },
    "layer":[
      {"mark": {
      "type": "line",
      "color": "indianred"},
      "data": {"url": "https://api.eia.gov/v2/co2-emissions/co2-emissions-aggregates/data/?api_key=bZ7fbef9jvSqEelw3XbaF6ise1CnHdeq2SX5Jbbp&facets[stateId][]=US&facets[fuelId][]=CO&facets[sectorId][]=TT&data[]=value&=json","format":{"type":"json","property":"series"}},
    "transform": [
      {
        "flatten":["data"],
        "as":["dataArray"]
      }
    ]  
    },
      {"mark": {
      "type": "line",
      "color": "greenyellow"},
      "data": 
      {
        "url": "https://api.eia.gov/v2/co2-emissions/co2-emissions-aggregates/data/?api_key=bZ7fbef9jvSqEelw3XbaF6ise1CnHdeq2SX5Jbbp&facets[stateId][]=US&facets[fuelId][]=NG&facets[sectorId][]=TT&data[]=value&frequency=annual&=json","format":{"type":"json","property":"series"}},     "transform": [
      {
        "flatten":["data"],
        "as":["dataArray"]
      }]
    },
    {"mark": {
      "type": "line",
      "color": "blue"},
      "data": {"url": "https://api.eia.gov/v2/co2-emissions/co2-emissions-aggregates/data/?api_key=bZ7fbef9jvSqEelw3XbaF6ise1CnHdeq2SX5Jbbp&facets[stateId][]=US&facets[fuelId][]=PE&facets[sectorId][]=TT&data[]=value&=json","format":{"type":"json","property":"series"}},
      "transform": [
      {
        "flatten":["data"],
        "as":["dataArray"]
      }]
    

  }]

}